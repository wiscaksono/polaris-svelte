<script lang="ts">
	import { page } from '$app/state';
	import { ChevronRight } from '@lucide/svelte';

	import * as Sidebar from '$lib/components/ui/sidebar/index.js';
	import * as Collapsible from '$lib/components/ui/collapsible/index.js';
	import SearchPolis from '$lib/features/search-polis/components/search-polis.svelte';

	import { SIDE_MENU } from '$lib/utils';

	const sidebar = Sidebar.useSidebar();
</script>

<Sidebar.Root collapsible="icon" class="z-20 overflow-x-hidden [&>*]:select-none">
	<Sidebar.Header class="grid h-16 place-items-center border-b border-sidebar-border">
		{#if sidebar.open}
			<svg width="148" height="41" viewBox="0 0 148 41" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M6.331 24.4331H0V0.0120503H11.994C13.2288 -0.0508125 14.4638 0.132733 15.627 0.55199C16.7902 0.971247 17.8582 1.61783 18.769 2.45405C19.5712 3.3125 20.1941 4.32242 20.601 5.42465C21.008 6.52688 21.1909 7.69924 21.139 8.87305C21.1466 10.0005 20.9285 11.1181 20.4974 12.1599C20.0663 13.2017 19.431 14.1466 18.629 14.939C17.6614 15.8427 16.5244 16.5457 15.2837 17.0074C14.0429 17.4691 12.7229 17.6804 11.4 17.629H6.331V24.4331ZM10.765 1.25805L9.494 6.05805C9.41296 6.45033 9.21433 6.8086 8.92456 7.08516C8.63479 7.36171 8.26763 7.54341 7.872 7.60605L3.141 8.82105L7.873 10.036C8.26898 10.099 8.63636 10.2812 8.92615 10.5583C9.21594 10.8354 9.41438 11.1943 9.495 11.5871L10.766 16.3871L12.037 11.5871C12.1174 11.1942 12.3157 10.8352 12.6056 10.558C12.8954 10.2809 13.2629 10.0988 13.659 10.036L18.39 8.82105L13.658 7.60605C13.262 7.54321 12.8945 7.36107 12.6047 7.08394C12.3149 6.80681 12.1165 6.44788 12.036 6.05505L10.765 1.25805Z"
					fill="#E11F27"
				/>
				<path
					d="M28.9606 12.5173C28.9606 13.6929 29.0998 14.7533 29.3783 15.6985C29.6799 16.6436 30.0976 17.462 30.6313 18.1535C31.1883 18.822 31.8612 19.3407 32.6502 19.7095C33.4392 20.0784 34.3442 20.2628 35.3653 20.2628C36.3631 20.2628 37.2565 20.0784 38.0455 19.7095C38.8577 19.3407 39.5306 18.822 40.0644 18.1535C40.6213 17.462 41.039 16.6436 41.3174 15.6985C41.6191 14.7533 41.77 13.6929 41.77 12.5173C41.77 11.3416 41.6191 10.2812 41.3174 9.3361C41.039 8.36791 40.6213 7.54956 40.0644 6.88105C39.5306 6.18949 38.8577 5.65929 38.0455 5.29046C37.2565 4.92162 36.3631 4.73721 35.3653 4.73721C34.3442 4.73721 33.4392 4.93315 32.6502 5.32504C31.8612 5.69387 31.1883 6.22407 30.6313 6.91563C30.0976 7.58414 29.6799 8.40249 29.3783 9.37068C29.0998 10.3158 28.9606 11.3647 28.9606 12.5173ZM47.3741 12.5173C47.3741 14.5689 47.0608 16.3785 46.4342 17.9461C45.8309 19.4905 44.9955 20.793 43.9281 21.8534C42.8606 22.8907 41.5843 23.6745 40.0992 24.2047C38.6372 24.7349 37.0592 25 35.3653 25C33.7177 25 32.1629 24.7349 30.701 24.2047C29.239 23.6745 27.9627 22.8907 26.8721 21.8534C25.7814 20.793 24.9228 19.4905 24.2963 17.9461C23.6697 16.3785 23.3564 14.5689 23.3564 12.5173C23.3564 10.4657 23.6813 8.66759 24.3311 7.1231C24.9808 5.55556 25.851 4.24159 26.9417 3.18119C28.0555 2.12079 29.3318 1.3255 30.7706 0.795297C32.2325 0.265099 33.7641 0 35.3653 0C37.0128 0 38.5676 0.265099 40.0295 0.795297C41.4915 1.3255 42.7678 2.12079 43.8584 3.18119C44.9491 4.24159 45.8077 5.55556 46.4342 7.1231C47.0608 8.66759 47.3741 10.4657 47.3741 12.5173Z"
					fill="white"
				/>
				<path d="M68.0166 19.8824V24.5159H51.9005V0.553251H57.3305V19.8824H68.0166Z" fill="white" />
				<path
					d="M88.7528 24.5159C88.4975 23.686 88.2074 22.8331 87.8826 21.9571C87.5809 21.0811 87.2792 20.2052 86.9776 19.3292H77.5794C77.2777 20.2052 76.9644 21.0811 76.6395 21.9571C76.3379 22.8331 76.0594 23.686 75.8041 24.5159H70.1652C71.0702 21.9341 71.9288 19.5482 72.741 17.3582C73.5532 15.1683 74.3422 13.1051 75.108 11.1687C75.897 9.23236 76.6627 7.39972 77.4053 5.67082C78.1711 3.91886 78.9601 2.213 79.7723 0.553251H84.9587C85.7477 2.213 86.5251 3.91886 87.2908 5.67082C88.0566 7.39972 88.8224 9.23236 89.5882 11.1687C90.3772 13.1051 91.1777 15.1683 91.9899 17.3582C92.8021 19.5482 93.6607 21.9341 94.5657 24.5159H88.7528ZM82.2436 5.98202C82.1276 6.3278 81.9536 6.80037 81.7215 7.39972C81.4895 7.99908 81.2226 8.69064 80.9209 9.47441C80.6193 10.2582 80.2828 11.1226 79.9115 12.0678C79.5634 13.0129 79.2037 14.0041 78.8325 15.0415H85.6897C85.3184 14.0041 84.9587 13.0129 84.6106 12.0678C84.2625 11.1226 83.926 10.2582 83.6012 9.47441C83.2995 8.69064 83.0326 7.99908 82.8006 7.39972C82.5685 6.80037 82.3829 6.3278 82.2436 5.98202Z"
					fill="white"
				/>
				<path
					d="M104.754 0.276626C108.374 0.276626 111.147 0.922084 113.073 2.213C114.999 3.48087 115.962 5.46335 115.962 8.16044C115.962 9.84325 115.568 11.2148 114.779 12.2752C114.013 13.3126 112.899 14.1309 111.437 14.7303C111.925 15.3296 112.435 16.0212 112.969 16.805C113.503 17.5657 114.025 18.3725 114.535 19.2254C115.069 20.0553 115.58 20.9313 116.067 21.8534C116.554 22.7524 117.007 23.6399 117.424 24.5159H111.333C110.892 23.7321 110.44 22.9368 109.975 22.13C109.534 21.3232 109.07 20.5394 108.583 19.7787C108.119 19.018 107.655 18.3034 107.191 17.6349C106.727 16.9433 106.263 16.3209 105.798 15.7676H103.118V24.5159H97.6881V0.899033C98.8716 0.668512 100.09 0.507147 101.343 0.414939C102.619 0.32273 103.756 0.276626 104.754 0.276626ZM105.067 4.87552C104.673 4.87552 104.313 4.88705 103.988 4.9101C103.687 4.93315 103.397 4.9562 103.118 4.97925V11.4799H104.65C106.692 11.4799 108.154 11.2264 109.036 10.7192C109.917 10.2121 110.358 9.34763 110.358 8.12586C110.358 6.95021 109.906 6.12033 109.001 5.63624C108.119 5.12909 106.808 4.87552 105.067 4.87552Z"
					fill="white"
				/>
				<path d="M120.905 0.553251H126.335V24.5159H120.905V0.553251Z" fill="white" />
				<path
					d="M138.497 20.4011C139.263 20.4011 139.889 20.3435 140.377 20.2282C140.887 20.0899 141.293 19.917 141.595 19.7095C141.897 19.479 142.106 19.2139 142.222 18.9142C142.338 18.6146 142.396 18.2803 142.396 17.9115C142.396 17.1277 142.024 16.4823 141.282 15.9751C140.539 15.4449 139.263 14.8801 137.453 14.2808C136.664 14.0041 135.875 13.6929 135.086 13.3472C134.297 12.9783 133.589 12.5288 132.963 11.9986C132.336 11.4454 131.826 10.7884 131.431 10.0277C131.037 9.24389 130.839 8.29876 130.839 7.19225C130.839 6.08575 131.048 5.09451 131.466 4.21853C131.884 3.3195 132.475 2.55878 133.241 1.93638C134.007 1.31397 134.935 0.841403 136.026 0.518674C137.116 0.172891 138.346 0 139.715 0C141.34 0 142.744 0.172891 143.927 0.518674C145.111 0.864455 146.085 1.24481 146.851 1.65975L145.285 5.91286C144.612 5.56708 143.858 5.2674 143.022 5.01383C142.21 4.73721 141.224 4.59889 140.064 4.59889C138.764 4.59889 137.824 4.78331 137.244 5.15214C136.687 5.49793 136.409 6.03965 136.409 6.77732C136.409 7.21531 136.513 7.58414 136.722 7.88382C136.931 8.18349 137.221 8.46012 137.592 8.71369C137.987 8.94421 138.428 9.16321 138.915 9.37068C139.425 9.5551 139.982 9.75104 140.586 9.95851C141.839 10.4195 142.929 10.8806 143.858 11.3416C144.786 11.7796 145.552 12.2983 146.155 12.8976C146.781 13.497 147.246 14.2001 147.547 15.0069C147.849 15.8137 148 16.7935 148 17.9461C148 20.1821 147.211 21.9225 145.633 23.1674C144.055 24.3891 141.676 25 138.497 25C137.43 25 136.467 24.9308 135.608 24.7925C134.749 24.6773 133.984 24.5274 133.311 24.343C132.661 24.1586 132.092 23.9627 131.605 23.7552C131.141 23.5477 130.747 23.3518 130.422 23.1674L131.953 18.8797C132.673 19.2716 133.554 19.6289 134.599 19.9516C135.666 20.2513 136.966 20.4011 138.497 20.4011Z"
					fill="white"
				/>
				<path
					d="M42.076 32.036C42.212 31.948 42.416 31.856 42.688 31.76C42.968 31.664 43.288 31.616 43.648 31.616C44.096 31.616 44.492 31.696 44.836 31.856C45.188 32.016 45.484 32.24 45.724 32.528C45.964 32.816 46.144 33.16 46.264 33.56C46.392 33.96 46.456 34.4 46.456 34.88C46.456 35.384 46.38 35.84 46.228 36.248C46.084 36.648 45.876 36.988 45.604 37.268C45.332 37.548 45.004 37.764 44.62 37.916C44.236 38.068 43.804 38.144 43.324 38.144C42.804 38.144 42.344 38.108 41.944 38.036C41.544 37.964 41.216 37.892 40.96 37.82V28.88L42.076 28.688V32.036ZM42.076 37.028C42.188 37.06 42.344 37.092 42.544 37.124C42.752 37.148 43.008 37.16 43.312 37.16C43.912 37.16 44.392 36.964 44.752 36.572C45.112 36.172 45.292 35.608 45.292 34.88C45.292 34.56 45.26 34.26 45.196 33.98C45.132 33.7 45.028 33.46 44.884 33.26C44.74 33.052 44.552 32.892 44.32 32.78C44.096 32.66 43.824 32.6 43.504 32.6C43.2 32.6 42.92 32.652 42.664 32.756C42.408 32.86 42.212 32.968 42.076 33.08V37.028Z"
					fill="white"
				/>
				<path
					d="M47.142 39.164C47.23 39.204 47.342 39.24 47.478 39.272C47.622 39.312 47.762 39.332 47.898 39.332C48.338 39.332 48.682 39.232 48.93 39.032C49.178 38.84 49.402 38.524 49.602 38.084C49.098 37.124 48.626 36.108 48.186 35.036C47.754 33.956 47.394 32.864 47.106 31.76H48.306C48.394 32.12 48.498 32.508 48.618 32.924C48.746 33.34 48.886 33.768 49.038 34.208C49.19 34.648 49.354 35.088 49.53 35.528C49.706 35.968 49.89 36.392 50.082 36.8C50.386 35.96 50.65 35.128 50.874 34.304C51.098 33.48 51.31 32.632 51.51 31.76H52.662C52.374 32.936 52.054 34.068 51.702 35.156C51.35 36.236 50.97 37.248 50.562 38.192C50.402 38.552 50.234 38.86 50.058 39.116C49.89 39.38 49.702 39.596 49.494 39.764C49.286 39.932 49.05 40.056 48.786 40.136C48.53 40.216 48.238 40.256 47.91 40.256C47.822 40.256 47.73 40.248 47.634 40.232C47.538 40.224 47.442 40.208 47.346 40.184C47.258 40.168 47.174 40.148 47.094 40.124C47.022 40.1 46.97 40.08 46.938 40.064L47.142 39.164Z"
					fill="white"
				/>
				<path
					d="M60.4202 36.848C60.3402 36.656 60.2322 36.412 60.0962 36.116C59.9682 35.82 59.8282 35.5 59.6762 35.156C59.5242 34.812 59.3602 34.46 59.1842 34.1C59.0162 33.732 58.8562 33.388 58.7042 33.068C58.5522 32.74 58.4082 32.448 58.2722 32.192C58.1442 31.936 58.0402 31.74 57.9602 31.604C57.8722 32.548 57.8002 33.572 57.7442 34.676C57.6882 35.772 57.6402 36.88 57.6002 38H56.4602C56.4922 37.28 56.5282 36.556 56.5682 35.828C56.6082 35.092 56.6522 34.372 56.7002 33.668C56.7562 32.956 56.8122 32.264 56.8682 31.592C56.9322 30.92 57.0002 30.284 57.0722 29.684H58.0922C58.3082 30.036 58.5402 30.452 58.7882 30.932C59.0362 31.412 59.2842 31.916 59.5322 32.444C59.7802 32.964 60.0202 33.488 60.2522 34.016C60.4842 34.536 60.6962 35.012 60.8882 35.444C61.0802 35.012 61.2922 34.536 61.5242 34.016C61.7562 33.488 61.9962 32.964 62.2442 32.444C62.4922 31.916 62.7402 31.412 62.9882 30.932C63.2362 30.452 63.4682 30.036 63.6842 29.684H64.7042C64.9762 32.364 65.1802 35.136 65.3162 38H64.1762C64.1362 36.88 64.0882 35.772 64.0322 34.676C63.9762 33.572 63.9042 32.548 63.8162 31.604C63.7362 31.74 63.6282 31.936 63.4922 32.192C63.3642 32.448 63.2242 32.74 63.0722 33.068C62.9202 33.388 62.7562 33.732 62.5802 34.1C62.4122 34.46 62.2522 34.812 62.1002 35.156C61.9482 35.5 61.8042 35.82 61.6682 36.116C61.5402 36.412 61.4362 36.656 61.3562 36.848H60.4202Z"
					fill="white"
				/>
				<path
					d="M69.0733 37.172C70.2893 37.172 70.8973 36.756 70.8973 35.924C70.8973 35.668 70.8413 35.452 70.7293 35.276C70.6253 35.092 70.4813 34.936 70.2973 34.808C70.1133 34.672 69.9013 34.556 69.6613 34.46C69.4293 34.364 69.1813 34.268 68.9173 34.172C68.6133 34.068 68.3253 33.952 68.0533 33.824C67.7813 33.688 67.5453 33.532 67.3453 33.356C67.1453 33.172 66.9853 32.956 66.8653 32.708C66.7533 32.46 66.6973 32.16 66.6973 31.808C66.6973 31.08 66.9453 30.512 67.4413 30.104C67.9373 29.696 68.6213 29.492 69.4933 29.492C69.9973 29.492 70.4533 29.548 70.8613 29.66C71.2773 29.764 71.5813 29.88 71.7733 30.008L71.4013 30.956C71.2333 30.852 70.9813 30.752 70.6453 30.656C70.3173 30.552 69.9333 30.5 69.4933 30.5C69.2693 30.5 69.0613 30.524 68.8693 30.572C68.6773 30.62 68.5093 30.692 68.3653 30.788C68.2213 30.884 68.1053 31.008 68.0173 31.16C67.9373 31.304 67.8973 31.476 67.8973 31.676C67.8973 31.9 67.9413 32.088 68.0293 32.24C68.1173 32.392 68.2413 32.528 68.4013 32.648C68.5613 32.76 68.7453 32.864 68.9533 32.96C69.1693 33.056 69.4053 33.152 69.6613 33.248C70.0213 33.392 70.3493 33.536 70.6453 33.68C70.9493 33.824 71.2093 33.996 71.4253 34.196C71.6493 34.396 71.8213 34.636 71.9413 34.916C72.0613 35.188 72.1213 35.52 72.1213 35.912C72.1213 36.64 71.8533 37.2 71.3173 37.592C70.7893 37.984 70.0413 38.18 69.0733 38.18C68.7453 38.18 68.4413 38.156 68.1613 38.108C67.8893 38.068 67.6453 38.02 67.4293 37.964C67.2133 37.9 67.0253 37.836 66.8653 37.772C66.7133 37.7 66.5933 37.64 66.5053 37.592L66.8533 36.632C67.0373 36.736 67.3173 36.852 67.6933 36.98C68.0693 37.108 68.5293 37.172 69.0733 37.172Z"
					fill="white"
				/>
				<path d="M73.5281 29.684H74.6921V38H73.5281V29.684Z" fill="white" />
				<path
					d="M81.8267 33.908H82.9907V37.796C82.8947 37.828 82.7547 37.864 82.5707 37.904C82.3947 37.944 82.1867 37.984 81.9467 38.024C81.7147 38.064 81.4587 38.096 81.1787 38.12C80.8987 38.152 80.6147 38.168 80.3267 38.168C79.7427 38.168 79.2107 38.072 78.7307 37.88C78.2507 37.688 77.8387 37.408 77.4947 37.04C77.1507 36.672 76.8827 36.22 76.6907 35.684C76.5067 35.148 76.4147 34.532 76.4147 33.836C76.4147 33.14 76.5187 32.524 76.7267 31.988C76.9427 31.444 77.2307 30.988 77.5907 30.62C77.9507 30.252 78.3707 29.972 78.8507 29.78C79.3387 29.588 79.8587 29.492 80.4107 29.492C80.7867 29.492 81.1187 29.516 81.4067 29.564C81.7027 29.612 81.9547 29.668 82.1627 29.732C82.3707 29.796 82.5387 29.86 82.6667 29.924C82.8027 29.988 82.8947 30.036 82.9427 30.068L82.5707 31.04C82.3387 30.888 82.0307 30.764 81.6467 30.668C81.2627 30.564 80.8707 30.512 80.4707 30.512C80.0467 30.512 79.6587 30.588 79.3067 30.74C78.9627 30.892 78.6667 31.112 78.4187 31.4C78.1787 31.688 77.9907 32.04 77.8547 32.456C77.7187 32.864 77.6507 33.324 77.6507 33.836C77.6507 34.332 77.7067 34.784 77.8187 35.192C77.9387 35.6 78.1147 35.952 78.3467 36.248C78.5867 36.536 78.8787 36.76 79.2227 36.92C79.5747 37.08 79.9867 37.16 80.4587 37.16C80.7947 37.16 81.0787 37.144 81.3107 37.112C81.5507 37.072 81.7227 37.036 81.8267 37.004V33.908Z"
					fill="white"
				/>
				<path d="M92.5946 36.992V38H87.5906V29.684H88.7546V36.992H92.5946Z" fill="white" />
				<path
					d="M94.8572 38H93.7412V31.76H94.8572V38ZM94.2932 30.632C94.0932 30.632 93.9212 30.568 93.7772 30.44C93.6412 30.304 93.5732 30.124 93.5732 29.9C93.5732 29.676 93.6412 29.5 93.7772 29.372C93.9212 29.236 94.0932 29.168 94.2932 29.168C94.4932 29.168 94.6612 29.236 94.7972 29.372C94.9412 29.5 95.0132 29.676 95.0132 29.9C95.0132 30.124 94.9412 30.304 94.7972 30.44C94.6612 30.568 94.4932 30.632 94.2932 30.632Z"
					fill="white"
				/>
				<path
					d="M99.2124 28.688C99.5404 28.688 99.8204 28.712 100.052 28.76C100.292 28.808 100.46 28.852 100.556 28.892L100.352 29.852C100.256 29.804 100.12 29.76 99.9444 29.72C99.7684 29.672 99.5524 29.648 99.2964 29.648C98.7764 29.648 98.4124 29.792 98.2044 30.08C97.9964 30.36 97.8924 30.74 97.8924 31.22V31.76H100.292V32.696H97.8924V38H96.7764V31.196C96.7764 30.396 96.9724 29.78 97.3644 29.348C97.7564 28.908 98.3724 28.688 99.2124 28.688Z"
					fill="white"
				/>
				<path
					d="M101.057 34.892C101.057 34.34 101.137 33.86 101.297 33.452C101.457 33.036 101.669 32.692 101.933 32.42C102.197 32.148 102.501 31.944 102.845 31.808C103.189 31.672 103.541 31.604 103.901 31.604C104.741 31.604 105.385 31.868 105.833 32.396C106.281 32.916 106.505 33.712 106.505 34.784C106.505 34.832 106.505 34.896 106.505 34.976C106.505 35.048 106.501 35.116 106.493 35.18H102.221C102.269 35.828 102.457 36.32 102.785 36.656C103.113 36.992 103.625 37.16 104.321 37.16C104.713 37.16 105.041 37.128 105.305 37.064C105.577 36.992 105.781 36.924 105.917 36.86L106.073 37.796C105.937 37.868 105.697 37.944 105.353 38.024C105.017 38.104 104.633 38.144 104.201 38.144C103.657 38.144 103.185 38.064 102.785 37.904C102.393 37.736 102.069 37.508 101.813 37.22C101.557 36.932 101.365 36.592 101.237 36.2C101.117 35.8 101.057 35.364 101.057 34.892ZM105.341 34.28C105.349 33.776 105.221 33.364 104.957 33.044C104.701 32.716 104.345 32.552 103.889 32.552C103.633 32.552 103.405 32.604 103.205 32.708C103.013 32.804 102.849 32.932 102.713 33.092C102.577 33.252 102.469 33.436 102.389 33.644C102.317 33.852 102.269 34.064 102.245 34.28H105.341Z"
					fill="white"
				/>
			</svg>
		{:else}
			<svg width="31" height="37" viewBox="0 0 31 37" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M9.28592 37H0V0H17.5873C21.7447 0 25.1809 1.27888 27.5237 3.69638C29.7974 6.04602 30.9997 9.4091 30.9997 13.4222C31.0118 15.1278 30.6924 16.8189 30.0603 18.3967C29.4281 19.9746 28.4958 21.4078 27.3177 22.6126C24.7011 25.282 21.0294 26.6905 16.7117 26.6905H9.28445L9.28592 37ZM15.7875 1.88665L13.9215 9.15574C13.8053 9.74824 13.5158 10.2904 13.0915 10.7102C12.6672 11.1299 12.1282 11.4073 11.5463 11.5054L4.60323 13.3453L11.5419 15.1852C12.1245 15.2832 12.6641 15.5609 13.0887 15.9812C13.5133 16.4016 13.8028 16.9446 13.9186 17.5378L15.7817 24.8054L17.6462 17.5363C17.7624 16.9438 18.0519 16.4016 18.4762 15.9819C18.9005 15.5622 19.4395 15.2848 20.0214 15.1867L26.9674 13.3453L20.0273 11.5054C19.4454 11.4073 18.9064 11.1299 18.4821 10.7102C18.0578 10.2904 17.7683 9.74824 17.6521 9.15574L15.7875 1.88665Z"
					fill="#E11F27"
				/>
			</svg>
		{/if}
	</Sidebar.Header>
	<Sidebar.Content class="divide-y divide-sidebar-border overflow-x-hidden [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden">
		{#each SIDE_MENU as { title, subMenu }, i (i)}
			{#if !title}
				<Sidebar.Group>
					<Sidebar.Menu>
						<SearchPolis />
						{#each subMenu as item (item.title)}
							<Sidebar.MenuItem>
								{@const isActive = item.href === '/' ? page.url.pathname === '/' : page.url.pathname.startsWith(item.href)}
								<Sidebar.MenuButton
									{isActive}
									tooltipContent={item.title}
									class={`transition-[width] after:absolute after:-right-2 after:hidden after:h-full after:rounded-l-md after:bg-destructive after:content-[''] data-[active=true]:after:block ${sidebar.open ? 'after:w-1' : 'after:w-0.5'}`}
								>
									{#snippet child({ props })}
										<a {...props} href={item.href}>
											<item.icon />
											<span>{item.title}</span>
										</a>
									{/snippet}
								</Sidebar.MenuButton>
							</Sidebar.MenuItem>
						{/each}
					</Sidebar.Menu>
				</Sidebar.Group>
			{:else}
				<Sidebar.Group>
					<Collapsible.Root open>
						<Sidebar.GroupLabel class="group/label w-full text-sm text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground">
							{#snippet child({ props })}
								<Collapsible.Trigger {...props}>
									{title}
									<ChevronRight class="ml-auto transition-transform group-data-[state=open]/collapsible:rotate-90" />
								</Collapsible.Trigger>
							{/snippet}
						</Sidebar.GroupLabel>
						<Collapsible.Content>
							<Sidebar.Menu>
								{#each subMenu as item (item.title)}
									<Sidebar.MenuItem>
										{@const isActive = item.href === '/' ? page.url.pathname === '/' : page.url.pathname.startsWith(item.href)}
										<Sidebar.MenuButton
											{isActive}
											tooltipContent={item.title}
											class="after:absolute after:-left-2 after:hidden after:h-full after:w-1 after:rounded-r-md after:bg-destructive after:content-[''] data-[active=true]:after:block"
										>
											{#snippet child({ props })}
												<a {...props} href={item.href}>
													<item.icon />
													<span>{item.title}</span>
												</a>
											{/snippet}
										</Sidebar.MenuButton>
									</Sidebar.MenuItem>
								{/each}
							</Sidebar.Menu>
						</Collapsible.Content>
					</Collapsible.Root>
				</Sidebar.Group>
			{/if}
		{/each}
	</Sidebar.Content>
	<Sidebar.Rail />
</Sidebar.Root>
